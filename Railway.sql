CREATE DATABASE RAILWAY;

USE RAILWAY;

CREATE TABLE TRAINLIST(
TRAIN_NO VARCHAR(50) PRIMARY KEY,
TRAIN_NAME VARCHAR(50),
SOURCE VARCHAR(50),
DESTINATION VARCHAR(50));
INSERT INTO TRAINLIST VALUES(1001,'sabari Express','Tirupathi','Vijayawada');
INSERT INTO TRAINLIST VALUES(1002,'Chennai Express','Vizagi','Chennai');
select * from TRAINLIST;


CREATE TABLE TRAIN_STATUS(
TRAIN_NO VARCHAR(45),
TRAIN_DATE datetime,
TOTAL_NO_AC_SEATS INT,
TOTAL_NO_GENRAL_SEATS INT,
NO_OF_AC_SEATS_BOOKED INT,
NO_OF_GENRAL_SEATS_BOOKED INT,
foreign key(TRAIN_NO) references TRAINLIST(TRAIN_NO));
INSERT INTO TRAIN_STATUS VALUES(1001,'2022-03-01 11-20-59',200,400,120,260);
INSERT INTO TRAIN_STATUS VALUES(1002,'2022-04-11 4-20-30',220,600,180,460);
select *from TRAIN_STATUS;

CREATE TABLE BOOKING(
TRAIN_NO VARCHAR(50),
TICKET_NO VARCHAR(50) unique KEY,
TRAIN_DATE datetime,
TICKET_CATEGORY VARCHAR(50),
TOTAL_AC_SEATS INT,
AC_SEATS_BOOKED INT,
TOTAL_GENRAL_SEATS INT,
AC_GENRAL_BOOKED INT,
BOOKING_STATUS VARCHAR(50),
foreign key(TRAIN_NO) references TRAINLIST(TRAIN_NO));
INSERT INTO BOOKING VALUES(1001,123,'2022-03-01 11-20-59','General',200,129,400,284,'Confirmed');
INSERT INTO BOOKING VALUES(1002,113,'2022-04-11 4-20-30','Tatkal',220,600,185,480,'Waitlist');
select * from BOOKING;

CREATE TABLE PASSANGER(
TICKET_NO VARCHAR(50) ,
TRAIN_NO VARCHAR(45),
DATE_OF_TICKET_BOOKED datetime,
NAME VARCHAR(45),
GENDER VARCHAR(10),
AGE INT,
PASSENGER_ADDRESS VARCHAR(150),
STATUS_OF_RESERVATION VARCHAR(50),
CATEGORY_FOR_TICKET_BOOKED VARCHAR(50),
foreign key(TRAIN_NO) references TRAINLIST(TRAIN_NO),
foreign key(TICKET_NO) references BOOKING(TICKET_NO));
INSERT INTO PASSANGER VALUES(123,1001,'2022-01-13 10-28-44','Sai','Male',23,'Guntur','Confirmed','General');
INSERT INTO PASSANGER VALUES(113,1002,'2022-01-12 17-08-34','Sailaja','Female',22,'Narasaraopet','Confirmed','ladies');
select * from PASSANGER;



CREATE TABLE CANCEL(
TICKET_NO VARCHAR(50),
TRAIN_NO VARCHAR(45),
TRAIN_NAME VARCHAR(45),
CANCEL_STATUS VARCHAR(50),
foreign key(TRAIN_NO) references TRAINLIST(TRAIN_NO),
foreign key(TICKET_NO) references BOOKING(TICKET_NO));
INSERT INTO CANCEL VALUES(123,1001,'SABARI EXPRESS','Pending');
INSERT INTO CANCEL VALUES(113,1002,'CHENNAI EXPRESS','Cancelled');
select * from CANCEL;
